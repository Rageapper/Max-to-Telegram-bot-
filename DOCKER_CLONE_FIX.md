# Решение проблемы клонирования репозитория в Docker

## Проблема

Ошибка: `fatal: could not read Username for 'https://github.com': No such device or address`

Docker не может клонировать приватный репозиторий GitHub при сборке образа.

## Решение: Использовать токен в URL правильно

### Шаг 1: Проверьте токен

1. Перейдите: https://github.com/settings/tokens
2. Убедитесь, что ваш токен существует и активен
3. Проверьте права токена - должен быть `repo` (полный доступ к репозиториям)

### Шаг 2: Правильный формат URL в панели хостинга

В панели хостинга URL должен быть **БЕЗ** дополнительных частей вроде `<repo_url>`:

**✅ ПРАВИЛЬНО:**
```
https://x-access-token:ghp_ВАШ_ТОКЕН@github.com/Rageapper/max-to-tg.git
```

**❌ НЕПРАВИЛЬНО:**
```
https://x-access-token:ghp_ВАШ_ТОКЕН@github.com/Rageapper/max-to-tg.git <repo_url>
```

### Шаг 3: Убедитесь, что URL правильно настроен

В панели хостинга:
- **URL репозитория**: `https://x-access-token:ghp_ВАШ_ТОКЕН@github.com/Rageapper/max-to-tg.git`
- **Ветка**: `main`
- **Никаких дополнительных параметров в URL!**

### Шаг 4: Если токен не работает - создайте новый

Если токен истек или не имеет прав:

1. Удалите старый токен: https://github.com/settings/tokens
2. Создайте новый токен:
   - Нажмите **"Generate new token (classic)"**
   - Отметьте ✅ **`repo`** (полный доступ)
   - Скопируйте новый токен
3. Обновите URL в панели хостинга с новым токеном

## Альтернативное решение: Сделать репозиторий публичным

Если проект можно сделать публичным:

1. Перейдите: https://github.com/Rageapper/max-to-tg/settings
2. Прокрутите вниз до **"Danger Zone"**
3. Нажмите **"Change repository visibility"**
4. Выберите **"Make public"**
5. Подтвердите

После этого используйте обычный URL без токена:
```
https://github.com/Rageapper/max-to-tg.git
```

⚠️ **ВАЖНО**: Убедитесь, что файл `.env` НЕ в репозитории (он в `.gitignore`).

## Проверка токена

Проверьте, работает ли токен локально:

```bash
# Тест токена
curl -H "Authorization: token ghp_ВАШ_ТОКЕН" https://api.github.com/user
```

Если токен работает - должен вернуть информацию о пользователе.

Или:

```bash
git clone https://x-access-token:ghp_ВАШ_ТОКЕН@github.com/Rageapper/max-to-tg.git test-clone
```

Если работает локально - проблема в настройках хостинга.

## Что проверить в панели хостинга

1. ✅ URL репозитория должен быть одной строкой БЕЗ дополнительных параметров
2. ✅ URL должен начинаться с `https://x-access-token:ghp_`
3. ✅ Токен должен быть полным (не обрезанным)
4. ✅ Ветка должна быть `main` (или нужная вам ветка)
5. ✅ Нет лишних пробелов в URL

## После исправления

1. Сохраните изменения в панели хостинга
2. Нажмите **"Пересобрать"** или **"Rebuild"**
3. Проверьте логи сборки

Если всё правильно настроено - сборка должна пройти успешно!

## Если всё еще не работает

Попробуйте:
1. Создать новый токен с правами `repo`
2. Сделать репозиторий публичным (если возможно)
3. Использовать SSH вместо HTTPS (если поддерживается)
